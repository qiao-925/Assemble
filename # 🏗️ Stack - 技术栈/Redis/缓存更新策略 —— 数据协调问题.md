# 🔄 **缓存与数据库的协调策略【缓存更新策略】**

## 🎯 **核心切入点：缓存作为辅助还是主力？**

## **Cache Aside策略（被广泛使用的最终一致性方案）—— 缓存作为数据库的辅助手段**

应用程序与缓存，数据库交互。—— 偏手动方式

- 读：先查询缓存，如果缓存中没有，则查询数据库，并将结果写入缓存
- 写：先更新数据库，然后删除缓存
    - 为什么写策略不能倒过来，表面上来讲，读写并发不一致；主力角度，数据库的优先级更高
    - 不倒过来也无法100%保证一致，但是**概率很小**，缓存的写入速度超快
        - 数据库更新了，由于一些问题例如网络问题，缓存还未失效，这时读写就**不一致。**

## **Read/Write Through（读写穿透）策略 —— 相对少见，缓存作为数据库的主力手段**

Redis不支持。

思想：加一层缓存处理层。

应用程序与缓存处理层交互，缓存处理层与数据库交互。

- 读：应用程序，缓存，数据库
- 写：更新缓存，并通过缓存组件同步更新数据库，最后通知数据库更新完成

## **Write-Back(写回) —— 捏着更新记录，异步批量更新数据**

数据不一致极低。