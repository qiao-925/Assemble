# 🚨 **缓存三大问题深度解析与解决方案**

## 🎯 **通用防护方案**

- 接口限流
- 被攻击时添加 IP 黑名单

## 🔍 **缓存穿透：key 不存在，大量请求到数据库**

- 缓存空值
- Bloom filter：快速判断集合中是否存在某个元素，允许误判。

## ⚡ **缓存击穿 —— 单个key失效，大量请求到数据库**

- 缓存预热：热点数据设置超大过期时间
- 生成缓存时加锁，大量请求拿不到锁哈哈

## 🌊 **缓存雪崩：大量热点key失效，大量请求到数据库**

### 💡 **核心原因：过期时间一致**

- 过期时间公式 = 基础时间 + 随机时间