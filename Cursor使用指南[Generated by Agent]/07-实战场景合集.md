# 🎪 实战场景合集

> **真实项目中的Cursor应用案例，让你立即上手实践**

## 🎯 场景分类

本文档包含15个实战场景，覆盖开发者日常工作的核心需求：

### 🚀 开发效率类
1. **[快速搭建项目脚手架](#场景1-快速搭建项目脚手架)**
2. **[API接口快速开发](#场景2-api接口快速开发)**
3. **[数据库模型设计](#场景3-数据库模型设计)**

### 🔧 代码优化类
4. **[性能瓶颈分析与优化](#场景4-性能瓶颈分析与优化)**
5. **[代码重构与现代化](#场景5-代码重构与现代化)**
6. **[安全漏洞检测与修复](#场景6-安全漏洞检测与修复)**

### 📚 学习成长类
7. **[理解复杂开源项目](#场景7-理解复杂开源项目)**
8. **[新技术栈快速上手](#场景8-新技术栈快速上手)**
9. **[算法问题解决](#场景9-算法问题解决)**

### 🐛 问题解决类
10. **[Bug调试与修复](#场景10-bug调试与修复)**
11. **[第三方库集成](#场景11-第三方库集成)**
12. **[跨平台兼容性处理](#场景12-跨平台兼容性处理)**

### 🏗️ 架构设计类
13. **[微服务架构设计](#场景13-微服务架构设计)**
14. **[前端组件库开发](#场景14-前端组件库开发)**
15. **[CI/CD流水线搭建](#场景15-cicd流水线搭建)**

---

## 场景1: 快速搭建项目脚手架

### 💼 业务场景
你需要快速搭建一个全栈的待办事项应用，包含前端、后端、数据库配置。

### 🎯 Cursor操作流程

#### 步骤1: 项目规划 (Cmd+L)
```
💬 与AI对话：
"我需要创建一个现代化的待办事项应用，要求：
1. 前端使用React + TypeScript + Tailwind CSS
2. 后端使用Node.js + Express + TypeScript  
3. 数据库使用PostgreSQL + Prisma ORM
4. 支持用户认证和CRUD操作
5. 部署到Docker容器

请给我详细的项目结构和技术选型建议"
```

#### 步骤2: 项目结构创建 (Background Agent)
```
🤖 任务描述：
"基于我们的讨论，请帮我：
1. 创建完整的项目文件夹结构
2. 生成所有必要的配置文件（package.json, tsconfig.json, docker-compose.yml等）
3. 设置开发环境配置
4. 创建基础的文件模板
5. 添加必要的依赖项"
```

#### 步骤3: 核心功能实现 (Tab补全 + Cmd+K)
```typescript
// 在 backend/src/models/Task.ts 中
// 创建任务模型
interface Task {
    // [Tab] 让AI补全Task接口定义
}

// 在 backend/src/controllers/taskController.ts 中
// CRUD操作实现
export const createTask = async (req: Request, res: Response) => {
    // [Tab] 让AI实现创建任务逻辑
};

// 在 frontend/src/components/TaskList.tsx 中
// React组件实现
const TaskList: React.FC = () => {
    // [Tab] 让AI实现任务列表组件
};
```

### 🏆 预期结果
- ⏱️ 时间节省：从2天缩短到2小时
- 📁 完整项目结构，包含最佳实践
- 🔧 开发环境一键启动
- 📝 详细的README和部署文档

---

## 场景2: API接口快速开发

### 💼 业务场景
为电商系统开发完整的用户管理API，包含认证、权限、数据验证等。

### 🎯 Cursor操作流程

#### 步骤1: API设计讨论 (Cmd+L)
```
💬 对话内容：
"设计一套RESTful API来管理用户系统，需要：
1. 用户注册/登录/登出
2. 用户资料的CRUD操作  
3. JWT认证和权限控制
4. 输入数据验证
5. 错误处理和日志记录
6. API文档自动生成

请给出API端点设计和实现建议"
```

#### 步骤2: 中间件开发 (Cmd+K选中代码修改)
```javascript
// auth/middleware.js
export const authenticateToken = (req, res, next) => {
    // 选中这个函数，Cmd+K："实现JWT token验证，包含错误处理"
};

export const authorizeRole = (roles) => {
    // 选中这个函数，Cmd+K："实现基于角色的权限验证"
};
```

#### 步骤3: 路由和控制器 (Tab补全)
```javascript
// routes/userRoutes.js
import express from 'express';
import { authenticateToken, authorizeRole } from '../middleware/auth.js';

const router = express.Router();

// 用户注册
router.post('/register', async (req, res) => {
    // [Tab] AI实现注册逻辑，包含数据验证
});

// 用户登录  
router.post('/login', async (req, res) => {
    // [Tab] AI实现登录逻辑，生成JWT token
});

// 获取用户资料
router.get('/profile', authenticateToken, async (req, res) => {
    // [Tab] AI实现获取用户资料逻辑
});

// 更新用户资料
router.put('/profile', authenticateToken, async (req, res) => {
    // [Tab] AI实现更新逻辑，包含数据验证
});
```

### 🏆 预期结果
- 🚀 开发速度提升300%
- 🔒 内置安全最佳实践
- 📖 自动生成的API文档
- 🧪 完整的测试用例

---

## 场景3: 数据库模型设计

### 💼 业务场景
设计一个博客系统的数据库结构，包含用户、文章、评论、标签等复杂关联。

### 🎯 Cursor操作流程

#### 步骤1: 数据模型讨论 (Cmd+L)
```
💬 对话内容：
"设计一个博客系统的数据库模型，需要支持：
1. 多用户系统（管理员、作者、读者）
2. 文章发布、编辑、分类
3. 评论系统（支持回复）
4. 标签系统
5. 用户关注和点赞功能
6. 文章搜索和统计

请给出ER图设计和表结构建议"
```

#### 步骤2: Prisma Schema设计 (Tab补全)
```prisma
// prisma/schema.prisma
generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// 用户模型
model User {
    // [Tab] AI生成完整的用户模型字段和关系
}

// 文章模型
model Post {
    // [Tab] AI生成文章模型，包含与用户、评论、标签的关系
}

// 评论模型
model Comment {
    // [Tab] AI生成支持嵌套回复的评论模型
}

// 标签模型
model Tag {
    // [Tab] AI生成标签模型和多对多关系
}
```

#### 步骤3: 数据库迁移和种子数据 (Background Agent)
```
🤖 任务描述：
"基于设计的数据模型：
1. 生成Prisma迁移文件
2. 创建种子数据脚本，包含测试用户、文章、评论
3. 编写数据库操作的服务层代码
4. 创建数据验证和清理工具
5. 生成数据库文档"
```

### 🏆 预期结果
- 📊 完整的数据库设计文档
- 🔧 一键数据库初始化
- 📝 类型安全的数据操作接口
- 🧪 完整的测试数据集

---

## 场景4: 性能瓶颈分析与优化

### 💼 业务场景
你的React应用在生产环境中加载缓慢，需要找出性能瓶颈并进行优化。

### 🎯 Cursor操作流程

#### 步骤1: 性能分析 (Cmd+L + @文件引用)
```
💬 对话内容：
"分析这个React应用的性能问题：

@App.jsx @UserDashboard.jsx @ProductList.jsx

主要问题：
1. 首次加载时间超过5秒
2. 滚动时卡顿
3. 内存占用持续增长

请帮我分析可能的性能瓶颈并给出优化方案"
```

#### 步骤2: 组件优化 (Cmd+K选中组件)
```jsx
// 选中有性能问题的组件
const ProductList = ({ products, filters }) => {
    // 当前实现有性能问题
    return (
        <div>
            {products.filter(product => 
                product.category === filters.category &&
                product.price >= filters.minPrice
            ).map(product => (
                <ProductCard key={product.id} product={product} />
            ))}
        </div>
    );
};

// Cmd+K: "优化这个组件的性能，使用useMemo、useCallback和React.memo"
```

#### 步骤3: 代码分割和懒加载 (Tab补全)
```jsx
// App.jsx
import { lazy, Suspense } from 'react';

// 懒加载组件
const Dashboard = lazy(() => {
    // [Tab] AI实现动态导入和错误边界处理
});

const ProductList = lazy(() => {
    // [Tab] AI实现懒加载逻辑
});

// 路由配置
function App() {
    return (
        <Router>
            <Suspense fallback={<LoadingSpinner />}>
                {/* [Tab] AI生成优化后的路由配置 */}
            </Suspense>
        </Router>
    );
}
```

#### 步骤4: 性能监控 (Background Agent)
```
🤖 任务描述：
"为应用添加完整的性能监控：
1. 集成Web Vitals监控
2. 添加自定义性能指标收集
3. 实现性能预算检查
4. 创建性能监控仪表板
5. 设置性能回归告警"
```

### 🏆 预期结果
- ⚡ 首次加载时间减少70%
- 📊 完整的性能监控体系
- 🔧 自动化的性能优化建议
- 📈 持续的性能趋势分析

---

## 场景5: 代码重构与现代化

### 💼 业务场景
你接手了一个5年前的jQuery项目，需要将其重构为现代React应用。

### 🎯 Cursor操作流程

#### 步骤1: 代码分析 (Cmd+L)
```
💬 对话内容：
"我有一个老旧的jQuery项目需要重构为React：

@legacy/main.js @legacy/ui.js @legacy/api.js

请帮我：
1. 分析现有代码的功能结构
2. 制定重构计划和迁移策略
3. 识别可复用的业务逻辑
4. 规划现代化的技术栈"
```

#### 步骤2: 逐步迁移 (Background Agent)
```
🤖 任务描述：
"执行jQuery到React的渐进式重构：
1. 创建新的React项目结构
2. 迁移现有的API调用逻辑
3. 将jQuery组件转换为React组件
4. 添加TypeScript类型定义
5. 实现现代化的状态管理
6. 保持向后兼容性"
```

#### 步骤3: 组件重写 (Tab补全)
```jsx
// 原jQuery代码转换为React组件
// 用户列表组件
const UserList = () => {
    // [Tab] AI基于jQuery代码生成现代React实现
    const [users, setUsers] = useState([]);
    const [loading, setLoading] = useState(true);
    
    useEffect(() => {
        // [Tab] AI将jQuery的AJAX调用转换为现代fetch
    }, []);
    
    return (
        // [Tab] AI生成现代化的JSX结构
    );
};
```

### 🏆 预期结果
- 🔄 零停机的渐进式重构
- 📱 现代化的用户体验
- 🛡️ 类型安全的代码库
- 🧪 完整的测试覆盖

---

## 场景6-15: 其他重要场景

由于篇幅限制，我将剩余场景以概要形式呈现：

### 🔒 场景6: 安全漏洞检测与修复
- **重点**: 使用AI检测XSS、SQL注入等安全问题
- **技巧**: Cmd+L分析安全最佳实践，Cmd+K修复具体漏洞

### 📚 场景7: 理解复杂开源项目
- **重点**: 快速理解大型代码库架构
- **技巧**: @文件引用+系统性提问，建立项目知识图谱

### 🚀 场景8: 新技术栈快速上手
- **重点**: 学习新框架如Next.js、Svelte等
- **技巧**: 对比学习，从熟悉技术迁移到新技术

### 🧮 场景9: 算法问题解决
- **重点**: LeetCode刷题和算法优化
- **技巧**: AI解释思路，人工实现，迭代优化

### 🐛 场景10: Bug调试与修复
- **重点**: 系统性的问题排查方法
- **技巧**: 日志分析+AI建议的结合使用

## 🎯 使用这些场景的建议

### 📈 学习路径
```
Week 1: 熟练掌握场景1-3（基础开发）
Week 2: 实践场景4-6（优化提升）
Week 3: 挑战场景7-9（学习成长）
Week 4: 应用场景10-15（解决复杂问题）
```

### 💡 实践技巧
1. **先理解，再实现** - 让AI解释原理，然后动手实践
2. **小步快跑** - 将复杂任务分解为小的可验证步骤
3. **持续迭代** - 基于AI建议不断改进解决方案
4. **举一反三** - 将学到的模式应用到其他类似场景

---

> **记住**: 这些场景不是孤立的，它们会在实际项目中组合出现。掌握了这些核心场景，你就能应对大部分的开发挑战！🚀

**➡️ 下一步：[10-最佳实践与技巧](./10-最佳实践与技巧.md)**